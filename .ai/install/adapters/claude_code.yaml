# Claude Code Adapter Configuration
# Defines how .ai/ sources are transformed for Claude Code

adapter: claude_code
version: 0.1
description: Claude Code project context adapter

# Output file configuration
output:
  path: .claude/project.md
  format: markdown
  encoding: utf-8

# Content sections and their sources
sections:
  - id: header
    type: auto_generated
    content: "Auto-generated by mcp install --all-tools"

  - id: spec_summary
    type: from_file
    source: .ai/spec/MCP_OS_Operational_Spec_v0_1.md
    selector: "## 2. 핵심 설계 원칙"
    title: "System Architecture & Core Principles"

  - id: agents_detailed
    type: from_directory
    source: .ai/agents/
    pattern: "*.agent.md"
    title: "Agent Specifications"
    include_content: full

  - id: skills_structure
    type: from_directory
    source: .ai/skills/
    pattern: "*/README.md"
    title: "Skills Structure"
    max_depth: 1

  - id: validators
    type: from_directory
    source: .ai/validators/
    pattern: "*.validator.md"
    title: "Validation Framework"
    exclude_patterns:
      - "_base"

  - id: workflows_all
    type: from_directory
    source: .ai/workflows/
    pattern: "*.workflow.md"
    title: "Workflow Definitions"
    exclude_patterns:
      - "_base"

  - id: directory_standards
    type: from_file
    source: .ai/spec/MCP_OS_Operational_Spec_v0_1.md
    selector: "## 3. 디렉토리 및 경로 표준"
    title: "Directory and Path Standards"

  - id: document_system
    type: from_file
    source: .ai/spec/MCP_OS_Operational_Spec_v0_1.md
    selector: "## 6. 문서 체계"
    title: "Document System & Metadata"

  - id: usage_guide
    type: template
    template: "claude_usage_guide"
    title: "How to Use Claude Code with This Project"

# Filters to apply when processing sources
filters:
  - remove_metadata_headers: false
  - truncate_content:
      max_lines: 150
  - normalize_paths: true
  - convert_obsidian_links: true
  - collapse_sections: true

# Post-processing rules
post_processing:
  - add_table_of_contents: true
  - add_footer: true
  - validate_markdown: true
  - generate_index: true
